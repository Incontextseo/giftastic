<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.css">
    <link rel="stylesheet" type="text/css" href="assets/css/style.css">
    <title>Giftastic Search Engine</title>
</head>
<body>
        <header class="site-header">
                <div class="innerwrap">
                  <div class="logo">JC Cheney</div>
                  <nav><span class="nav-link"><a href="index.html">About</a></span>
                  <span>&#124;</span>
                  <span class="nav-link"><a href="portfolio.html">Portfolio</a></span>
                  <span>&#124;</span>
                  <span class="nav-link"><a href="contact.html">Contact</a></span>
                    </div>
                  </nav>
              </header>
            
              <div class="container">
            
                <section class="main-content">
            
                  <h1>Giftastic Search Engine</h1>
                  
                  <hr>

                    <h2>Add a Teen Television Series</h2>
                  <input id="button-text" type="text" placeholder="Show title...">
                  <button id="add-button">Submit</button>
                  <p></p>
                  <div id="button-holder">
                    </div>
                    <hr>
                  <div id="gifs-appear-here">
                  </div>

            
                </section>
            
              </div>
            
    
        <script src="https://code.jquery.com/jquery-3.4.0.min.js">
    </script>
    <script>
      var teenShows = ["Dawson's Creek", "Buffy the Vampire Slayer", "Party of Five", "Pretty Little Liars", "Sabrina the Teenage Witch", "Gilmore Girls", "Gossip Girl", "Glee", "Friday Night Lights", "The O.C.", "Freeks and Geeks", "Daria"];
      var button;
      var gifImage;

      function makeMovie(title) {
        button = $('<button class="show-button" data-title="' + title + '">').text(title);
        // button.addClass('show-button');
        $('#button-holder').append(button);
      }

      for (var i = 0; i < teenShows.length; i++) {
        console.log(teenShows)
          makeMovie(teenShows[i]);
      }

      $('#add-button').on('click', function () {
        var title = $('#button-text').val();
        console.log(title + "Submit")
        makeMovie(title);
      })

$('body').on('click', ".show-button", function(event) {
    $("#gifs-appear-here").html("");
    var apikey = "pGzkld7EquWYklokNUQW2Dbnbbpinzs2"
    movie = $(this).attr("data-title");
    var queryURL = "https://api.giphy.com/v1/gifs/search?q=" + movie + "&api_key=" + apikey + "&limit=10";

    console.log(queryURL)

    $.ajax({
        url: queryURL,
        method: "GET"
    })
        .then(function(response) {
        var results = response.data;

        for (var i = 0; i < results.length; i++) {
            var gifDiv = $('<div class="gif-class">');

            var rating = results[i].rating;

            var p = $("<p>").text("Rating: " + rating);

            gifImage = $('<img class="gif">');
            gifImage.attr("src", results[i].images.fixed_height_still.url);

            gifDiv.prepend(gifImage);
            gifDiv.prepend(p);

            $("#gifs-appear-here").append(gifDiv);
        }
    });
});

$('body').on('click', '.gif', function() {
    var src = $(this).attr("src");
  if($(this).hasClass('playing')){
    //stop
    $(this).attr('src', src.replace(/\.gif/i, "_s.gif"))
    $(this).removeClass('playing');
  } else {
    //play
    $(this).addClass('playing');
    $(this).attr('src', src.replace(/\_s.gif/i, ".gif"))
  }
});
    
    </script>
</body>
</html>